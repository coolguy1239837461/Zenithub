<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>UV Static v2</title>
    <script src="check.js" defer></script>
    <script defer src="scripts/lstimer.js"></script>
    <link rel="stylesheet" href="style/global.css" />
    <link rel="stylesheet" href="style/browser.css" />

    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/gh/vanjs-org/van/public/van-1.5.2.nomodule.min.js"
    ></script>
    <script
      type="module"
      src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"
    ></script>
    <script
      nomodule
      src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"
    ></script>

    <script src="uv/uv.bundle.js" defer></script>
    <script src="uv/uv.config.js" defer></script>
    <script src="scripts/tabs.mjs" type="module" defer></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <script defer src="https://cdn.jsdelivr.net/gh/tf7software/Font-Awesome-pro-cdn@main/js/all.js"></script>
    <style>
      body {padding: 0;margin: 0;}
    </style>
    <script>
      window.onload = function () {
        if (!localStorage.getItem("discordAlertShown")) {
          alert("Join our discord .gg/redlv for bonuses, updates, links, and more!");
          localStorage.setItem("discordAlertShown", "true");
        }
      };
    </script>
  </head>

  <body>
    <div id="small-screen-overlay">
      UV Static 2.0 doesn't support smaller screens. Please use UV Static 2.0 on a larger screen.
    </div>

    <div id="nav"></div>
    <div id="main-content"></div>

    <div id="tab-view" class=""></div>
    <div class="sidebar-container">
      <header>
        <div class="page-data">
          <span id="controls">
            <button onclick="window.location.href='/'">
              <!-- SVG omitted for brevity -->
              <p class="tooltip">Home</p>
            </button>
            <span>
              <button id="page-back">
                <ion-icon name="arrow-back-outline" class="icon hover-focus1"></ion-icon>
                <p class="tooltip">Back</p>
              </button>
              <button id="page-forward">
                <ion-icon name="arrow-forward-outline" class="icon hover-focus1"></ion-icon>
                <p class="tooltip">Forward</p>
              </button>
              <button id="page-refresh">
                <ion-icon name="refresh-outline" class="icon hover-focus1"></ion-icon>
                <p class="tooltip">Refresh</p>
              </button>
              <button id="options-btn">
                <ion-icon name="menu-outline" class="icon hover-focus1"></ion-icon>
                <p class="tooltip">Menu</p>
              </button>
            </span>
          </span>
          <form id="url-form">
            <input
              type="text"
              id="url-input"
              onfocus="this.setSelectionRange(0, this.value.length)"
              class="hover-focus2"
              placeholder="Search or enter URL"
              autocomplete="off"
              autocorrect="off"
              spellcheck="false"
            />
            <button type="submit">Go</button>
          </form>
          <button id="new-tab" class="hover-focus2">
            <ion-icon name="add-outline" class="icon"></ion-icon>
            <span>New Tab</span>
          </button>
        </div>
        <div id="tab-list"></div>
      </header>
    </div>

    <div id="menu-overlay">
      <div class="option" id="devtools-option">Developer Tools</div>
      <div class="option" id="abc-option">Open in about:blank</div>
      <div class="option" id="git-option">GitHub</div>
    </div>

    <script>
      // Menu toggle
      const optionsBtn = document.getElementById("options-btn");
      const overlay = document.getElementById("menu-overlay");
      optionsBtn.addEventListener("click", () => {
        overlay.classList.toggle("active");
      });

      // Proxy search handling
      const urlForm = document.getElementById("url-form");
      const urlInput = document.getElementById("url-input");
      const mainContent = document.getElementById("main-content");

      urlForm.addEventListener("submit", async (e) => {
        e.preventDefault();
        const query = encodeURIComponent(urlInput.value);

        try {
          const res = await fetch(`/active/searchProxy?query=${query}`);
          if (!res.ok) throw new Error("Failed to fetch");

          const html = await res.text();
          mainContent.innerHTML = html;
        } catch (err) {
          mainContent.innerHTML = `<p style="color:red;">Error fetching results.</p>`;
          console.error(err);
        }
      });
    </script>
  </body>
</html>
